<!DOCTYPE html>
<html lang="en">
<head>
    <title>New Events Email</title>
    <link href="./css/new_events_email.css" rel="stylesheet"/>
</head>
<body>
<div id="header-container"></div>
<div id="table-container"></div>

<script>

    const container = document.querySelector("#table-container");
    const p = document.createElement('p');
 
    const eventTable = document.createElement('table');
    const tableHead = document.createElement('thead');
    const tableBody = document.createElement('tbody');
    eventTable.appendChild(tableHead);
    eventTable.appendChild(tableBody);
    


    fetch("./new_events.json")
        .then(response => response.json())
        .then(json => json.data)
        .then(dataArray => {
            const tableHeaderRow = document.createElement('tr');
            tableHead.appendChild(tableHeaderRow);
            const columnNames = Object.keys(dataArray[0]);
            columnNames.forEach(name => {
                const tableData = document.createElement('th');
                tableData.innerHTML = name;
                tableHeaderRow.appendChild(tableData);

                });
            eventTable.appendChild(tableHeaderRow);
            container.appendChild(eventTable);

            dataArray.forEach(event => {
                const eventRow = document.createElement('tr');
                // console.log(Object.entries(event))
                Object.entries(event).forEach(([key, value]) => {
                    const td = document.createElement('td');
                    td.classList.add(key);
                    td.innerHTML = value;
                    eventRow.appendChild(td);
                    
                })
                eventTable.appendChild(eventRow);

            
        });

    });

  </script>
  <script>
    const data = [
    { "index": 0, "event_name": "La Clique", "location": "Manchester, Manchester", "date": "27th Jun 2023", "url": "/event/4228" },
    { "index": 1, "event_name": "La Clique", "location": "Manchester, Manchester", "date": "28th Jun 2023", "url": "/event/4229" },
    { "index": 2, "event_name": "Chris Isaak", "location": "Hammersmith, London", "date": "29th Jun 2023", "url": "/event/4203" },
    // Other objects...
  ];

  </script>
</body>

</html>